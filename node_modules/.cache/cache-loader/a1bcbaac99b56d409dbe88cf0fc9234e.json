{"remainingRequest":"/Users/eudis/Dev/GSMA/b4ll/b4ll-docs/node_modules/babel-loader/lib/index.js??ref--9-1!/Users/eudis/Dev/GSMA/b4ll/b4ll-docs/src/frontend/AlertButton.jsx","dependencies":[{"path":"/Users/eudis/Dev/GSMA/b4ll/b4ll-docs/src/frontend/AlertButton.jsx","mtime":1615376508295},{"path":"/Users/eudis/Dev/GSMA/b4ll/b4ll-docs/node_modules/cache-loader/dist/cjs.js","mtime":1613079817669},{"path":"/Users/eudis/Dev/GSMA/b4ll/b4ll-docs/node_modules/babel-loader/lib/index.js","mtime":1613079817555}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9leHRlbmRzIGZyb20iL1VzZXJzL2V1ZGlzL0Rldi9HU01BL2I0bGwvYjRsbC1kb2NzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzIjsvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzICovaW1wb3J0IHN0eWxlIGZyb20nLi9BbGVydEJ1dHRvbi5tb2R1bGUuY3NzJztpbXBvcnQgUmVhY3QgZnJvbSdyZWFjdCc7aW1wb3J0IGF4aW9zIGZyb20nYXhpb3MnO2NvbnN0IHVzZUlucHV0PWluaXQ9Pntjb25zdFt2YWx1ZSxzZXRWYWx1ZV09UmVhY3QudXNlU3RhdGUoaW5pdCk7Y29uc3Qgb25DaGFuZ2U9UmVhY3QudXNlQ2FsbGJhY2soZT0+c2V0VmFsdWUoYCske2UudGFyZ2V0LnZhbHVlLnJlcGxhY2UoL1teXGRdL2dpLCcnKX1gKSxbc2V0VmFsdWVdKTtjb25zdCBvbkZvY3VzPVJlYWN0LnVzZUNhbGxiYWNrKGU9PnNldFZhbHVlKGArJHtlLnRhcmdldC52YWx1ZS5yZXBsYWNlKC9bXlxkXS9naSwnJyl9YCksW3ZhbHVlLHNldFZhbHVlXSk7cmV0dXJue3ZhbHVlLG9uQ2hhbmdlLG9uRm9jdXN9O307Y29uc3QgdXNlQWxlcnRUcmlnZ2VyPXBob25lPT57Y29uc3Rbc3RhdGUsc2V0U3RhdGVdPVJlYWN0LnVzZVN0YXRlKHtzdGF0ZTonSU5JVCd9KTtjb25zdCB0cmlnZ2VyPVJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jKCk9PntzZXRTdGF0ZSh7c3RhdGU6J1BFTkRJTkcnfSk7dHJ5e2F3YWl0IGF4aW9zLmdldChgJHtwcm9jZXNzLmVudi5BUElfSE9TVH0vZW4tR0IvY2FsbGJhY2s/Q2FsbGVyPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHBob25lKX1gLHtjcm9zc2RvbWFpbjp0cnVlfSk7c2V0U3RhdGUoe3N0YXRlOidTVUNDRVNTJ30pO31jYXRjaChlKXtzZXRTdGF0ZSh7c3RhdGU6J0VSUk9SJyxlcnJvcjplLnJlc3BvbnNlLmRhdGEuZXJyb3J8fCdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkJ30pO319LFtwaG9uZSxzZXRTdGF0ZV0pO3JldHVybntzdGF0ZSx0cmlnZ2VyfTt9O2V4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFsZXJ0QnV0dG9uKCl7Y29uc3QgcGhvbmVOdW1iZXI9dXNlSW5wdXQoJys0NC4uLicpO2NvbnN0e3RyaWdnZXIsc3RhdGV9PXVzZUFsZXJ0VHJpZ2dlcihwaG9uZU51bWJlci52YWx1ZSk7c3dpdGNoKHN0YXRlLnN0YXRlKXtjYXNlJ1BFTkRJTkcnOnJldHVybi8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLG51bGwsIlBsZWFzZSB3YWl0Li4uIik7Y2FzZSdTVUNDRVNTJzpyZXR1cm4vKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IixudWxsLCJTdWNjZXNzZnVsbHkgcmVxdWVzdGVkISBQbGVhc2UgYXdhaXQgeW91ciBjYWxsLi4uIik7fWxldCBtZXNzYWdlPXN0YXRlLmVycm9yfHxudWxsO3JldHVybi8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLG51bGwsLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImlucHV0IixfZXh0ZW5kcyh7Y2xhc3NOYW1lOnN0eWxlLmlucHV0LHR5cGU6InRleHQiLHBsYWNlaG9sZGVyOiIrNDQifSxwaG9uZU51bWJlcikpLC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLHtjbGFzc05hbWU6c3R5bGUuYnV0dG9uLG9uQ2xpY2s6dHJpZ2dlcn0sIkNhbGwgbWUhIiksLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJyIixudWxsKSxtZXNzYWdlPy8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLHtjbGFzc05hbWU6ImFkbW9uaXRpb24gYWRtb25pdGlvbi1kYW5nZXIgYWxlcnQgYWxlcnQtLWRhbmdlciJ9LC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLHtjbGFzc05hbWU6ImFkbW9uaXRpb24tY29udGVudCJ9LC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIixudWxsLG1lc3NhZ2UpKSk6bnVsbCk7fQ=="},{"version":3,"sources":["/Users/eudis/Dev/GSMA/b4ll/b4ll-docs/src/frontend/AlertButton.jsx"],"names":["style","React","axios","useInput","init","value","setValue","useState","onChange","useCallback","e","target","replace","onFocus","useAlertTrigger","phone","state","setState","trigger","get","process","env","API_HOST","encodeURIComponent","crossdomain","error","response","data","AlertButton","phoneNumber","message","input","button"],"mappings":"2GAAA,sEACA,MAAOA,CAAAA,KAAP,KAAkB,0BAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,KAAMC,CAAAA,QAAQ,CAAIC,IAAD,EAAU,CACvB,KAAM,CAACC,KAAD,CAAQC,QAAR,EAAoBL,KAAK,CAACM,QAAN,CAAeH,IAAf,CAA1B,CACA,KAAMI,CAAAA,QAAQ,CAAGP,KAAK,CAACQ,WAAN,CACZC,CAAD,EAAOJ,QAAQ,CAAE,IAAGI,CAAC,CAACC,MAAF,CAASN,KAAT,CAAeO,OAAf,CAAuB,SAAvB,CAAkC,EAAlC,CAAsC,EAA3C,CADF,CAEb,CAACN,QAAD,CAFa,CAAjB,CAIA,KAAMO,CAAAA,OAAO,CAAGZ,KAAK,CAACQ,WAAN,CACXC,CAAD,EAAOJ,QAAQ,CAAE,IAAGI,CAAC,CAACC,MAAF,CAASN,KAAT,CAAeO,OAAf,CAAuB,SAAvB,CAAkC,EAAlC,CAAsC,EAA3C,CADH,CAEZ,CAACP,KAAD,CAAQC,QAAR,CAFY,CAAhB,CAIA,MAAO,CAAED,KAAF,CAASG,QAAT,CAAmBK,OAAnB,CAAP,CACH,CAXD,CAaA,KAAMC,CAAAA,eAAe,CAAIC,KAAD,EAAW,CAC/B,KAAM,CAACC,KAAD,CAAQC,QAAR,EAAoBhB,KAAK,CAACM,QAAN,CAAe,CAAES,KAAK,CAAE,MAAT,CAAf,CAA1B,CACA,KAAME,CAAAA,OAAO,CAAGjB,KAAK,CAACQ,WAAN,CAAkB,SAAY,CAC1CQ,QAAQ,CAAC,CAAED,KAAK,CAAE,SAAT,CAAD,CAAR,CACA,GAAI,CACA,KAAMd,CAAAA,KAAK,CAACiB,GAAN,CACD,GACGC,OAAO,CAACC,GAAR,CAAYC,QACf,0BAAyBC,kBAAkB,CAACR,KAAD,CAAQ,EAHlD,CAIJ,CAAES,WAAW,CAAE,IAAf,CAJI,CAAN,CAKAP,QAAQ,CAAC,CAAED,KAAK,CAAE,SAAT,CAAD,CAAR,CACH,CAAC,MAAON,CAAP,CAAU,CACRO,QAAQ,CAAC,CACLD,KAAK,CAAE,OADF,CAELS,KAAK,CAAEf,CAAC,CAACgB,QAAF,CAAWC,IAAX,CAAgBF,KAAhB,EAAyB,8BAF3B,CAAD,CAAR,CAIH,CACJ,CAfe,CAeb,CAACV,KAAD,CAAQE,QAAR,CAfa,CAAhB,CAgBA,MAAO,CAAED,KAAF,CAASE,OAAT,CAAP,CACH,CAnBD,CAqBA,cAAe,SAASU,CAAAA,WAAT,EAAuB,CAClC,KAAMC,CAAAA,WAAW,CAAG1B,QAAQ,CAAC,QAAD,CAA5B,CACA,KAAM,CAAEe,OAAF,CAAWF,KAAX,EAAqBF,eAAe,CAACe,WAAW,CAACxB,KAAb,CAA1C,CAEA,OAAQW,KAAK,CAACA,KAAd,EACI,IAAK,SAAL,CACI,mBAAO,gDAAP,CACJ,IAAK,SAAL,CACI,mBAAO,mFAAP,CAJR,CAOA,GAAIc,CAAAA,OAAO,CAAGd,KAAK,CAACS,KAAN,EAAe,IAA7B,CACA,mBACI,4CACI,sCACI,SAAS,CAAEzB,KAAK,CAAC+B,KADrB,CAEI,IAAI,CAAC,MAFT,CAGI,WAAW,CAAC,KAHhB,EAIQF,WAJR,EADJ,cAOI,8BAAQ,SAAS,CAAE7B,KAAK,CAACgC,MAAzB,CAAiC,OAAO,CAAEd,OAA1C,aAPJ,cAUI,8BAVJ,CAWKY,OAAO,cACJ,2BAAK,SAAS,CAAC,kDAAf,eACI,2BAAK,SAAS,CAAC,oBAAf,eACI,6BAAIA,OAAJ,CADJ,CADJ,CADI,CAMJ,IAjBR,CADJ,CAqBH","sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport style from './AlertButton.module.css';\nimport React from 'react';\nimport axios from 'axios';\n\nconst useInput = (init) => {\n    const [value, setValue] = React.useState(init);\n    const onChange = React.useCallback(\n        (e) => setValue(`+${e.target.value.replace(/[^\\d]/gi, '')}`),\n        [setValue]\n    );\n    const onFocus = React.useCallback(\n        (e) => setValue(`+${e.target.value.replace(/[^\\d]/gi, '')}`),\n        [value, setValue]\n    );\n    return { value, onChange, onFocus };\n};\n\nconst useAlertTrigger = (phone) => {\n    const [state, setState] = React.useState({ state: 'INIT' });\n    const trigger = React.useCallback(async () => {\n        setState({ state: 'PENDING' });\n        try {\n            await axios.get(\n                `${\n                    process.env.API_HOST\n                }/en-GB/callback?Caller=${encodeURIComponent(phone)}`\n            , { crossdomain: true });\n            setState({ state: 'SUCCESS' });\n        } catch (e) {\n            setState({\n                state: 'ERROR',\n                error: e.response.data.error || 'An unexpected error occurred',\n            });\n        }\n    }, [phone, setState]);\n    return { state, trigger };\n};\n\nexport default function AlertButton() {\n    const phoneNumber = useInput('+44...');\n    const { trigger, state } = useAlertTrigger(phoneNumber.value);\n\n    switch (state.state) {\n        case 'PENDING':\n            return <div>Please wait...</div>;\n        case 'SUCCESS':\n            return <div>Successfully requested! Please await your call...</div>;\n    }\n\n    let message = state.error || null;\n    return (\n        <div>\n            <input\n                className={style.input}\n                type=\"text\"\n                placeholder=\"+44\"\n                {...phoneNumber}\n            />\n            <button className={style.button} onClick={trigger}>\n                Call me!\n            </button>\n            <br />\n            {message ? (\n                <div className=\"admonition admonition-danger alert alert--danger\">\n                    <div className=\"admonition-content\">\n                        <p>{message}</p>\n                    </div>\n                </div>\n            ) : null}\n        </div>\n    );\n}\n"]}]}